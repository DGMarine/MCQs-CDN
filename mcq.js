const questionNumber=document.querySelector(".question-number"),questionText=document.querySelector(".question-text"),optionContainer=document.querySelector(".option-container"),answersIndicatorContainer=document.querySelector(".answers-indicator"),homeBox=document.querySelector(".home-box"),quizBox=document.querySelector(".quiz-box"),resultBox=document.querySelector(".result-box"),questionLimit=30;let questionContainer=0,currentQuestion,availableQustion=[],availableOptions=[],correctAnswers=0,attempt=0;function setAvailableQustion(){let e=quiz.length;for(let t=0;t<e;t++)availableQustion.push(quiz[t])}function getNewQuestion(){questionNumber.innerHTML="Question "+(questionContainer+1)+" of 30";let e=availableQustion[Math.floor(Math.random()*availableQustion.length)];currentQuestion=e,questionText.innerHTML=currentQuestion.q;let t=availableQustion.indexOf(e);if(availableQustion.splice(t,1),currentQuestion.hasOwnProperty("img")){let n=document.createElement("img");n.src=currentQuestion.img,questionText.appendChild(n)}let o=currentQuestion.options.length;for(let i=0;i<o;i++)availableOptions.push(i);optionContainer.innerHTML="";let r=.15;for(let s=0;s<o;s++){let a=availableOptions[Math.floor(Math.random()*availableOptions.length)],l=availableOptions.indexOf(a);availableOptions.splice(l,1);let u=document.createElement("div");u.innerHTML=currentQuestion.options[a],u.id=a,u.style.animationDelay=r+"s",r+=.15,u.className="option",optionContainer.appendChild(u),u.setAttribute("onclick","getResult(this)")}questionContainer++}function getResult(e){let t=parseInt(e.id);if(t===currentQuestion.answer)e.classList.add("correct"),updateAnswerIndicator("correct"),correctAnswers++;else{e.classList.add("wrong"),updateAnswerIndicator("wrong");let n=optionContainer.children.length;for(let o=0;o<n;o++)parseInt(optionContainer.children[o].id)===currentQuestion.answer&&optionContainer.children[o].classList.add("correct")}attempt++,unclickableOptions()}function unclickableOptions(){let e=optionContainer.children.length;for(let t=0;t<e;t++)optionContainer.children[t].classList.add("already-answered")}function answersIndicator(){answersIndicatorContainer.innerHTML="";for(let e=0;e<30;e++){let t=document.createElement("div");answersIndicatorContainer.appendChild(t)}}function updateAnswerIndicator(e){answersIndicatorContainer.children[questionContainer-1].classList.add(e)}function next(){30===questionContainer?quizOver():getNewQuestion()}function quizOver(){quizBox.classList.add("hide"),resultBox.classList.remove("hide"),quizResult()}function quizResult(){resultBox.querySelector(".total-question").innerHTML=30,resultBox.querySelector(".total-attempt").innerHTML=attempt,resultBox.querySelector(".total-correct").innerHTML=correctAnswers,resultBox.querySelector(".total-wrong").innerHTML=attempt-correctAnswers;let e=correctAnswers/30*100;resultBox.querySelector(".percentage").innerHTML=e.toFixed(2)+"%",resultBox.querySelector(".total-score").innerHTML=correctAnswers+" / 30"}function resetQuiz(){questionContainer=0,correctAnswers=0,attempt=0,availableQustion=[]}function tryAgainQuiz(){resultBox.classList.add("hide"),quizBox.classList.remove("hide"),resetQuiz(),startQuiz()}function goToHome(){resultBox.classList.add("hide"),homeBox.classList.remove("hide"),resetQuiz()}function startQuiz(){homeBox.classList.add("hide"),quizBox.classList.remove("hide"),setAvailableQustion(),getNewQuestion(),answersIndicator()}window.onload=function(){homeBox.querySelector(".total-quration").innerHTML=30};
